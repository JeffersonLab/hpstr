<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hpstr: processors/config/bhToys_cfg.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hpstr
   </div>
   <div id="projectbrief">The Heavy Photon Search Toolkit for Reconstruction (hpstr) provides an interface to physics data from the HPS experiment saved in the LCIO format and converts it into an ROOT based format.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4ac0cf52b60bedb296701740c5b274e6.html">processors</a></li><li class="navelem"><a class="el" href="dir_1d18fa4e8d51235d9d849665a2bc63dc.html">config</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">bhToys_cfg.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="bhToys__cfg_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html">    1</a></span>&#160;<span class="keyword">import</span> HpstrConf</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">import</span> sys</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> baseConfig <span class="keyword">as</span> base</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a90eee7a4677ca8b1ed116364a24367f9">    5</a></span>&#160;parser = base.parser</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#ab0bede79c5f4cbed9c2cd932a0ace201">    7</a></span>&#160;parser.add_argument(<span class="stringliteral">&quot;-m&quot;</span>, <span class="stringliteral">&quot;--mass&quot;</span>, type=int, dest=<span class="stringliteral">&quot;mass_hypo&quot;</span>,</div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#affb1327b18bf08a379d19eef89cf1ed1">    8</a></span>&#160;        help=<span class="stringliteral">&quot;Mass hypothesis in MeV.&quot;</span>, metavar=<span class="stringliteral">&quot;mass_hypo&quot;</span>, default=145)</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-p&quot;</span>, <span class="stringliteral">&quot;--poly&quot;</span>, type=int, dest=<span class="stringliteral">&quot;poly_order&quot;</span>,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        help=<span class="stringliteral">&quot;Polynomial order of background model.&quot;</span>, metavar=<span class="stringliteral">&quot;poly_order&quot;</span>, default=3)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-P&quot;</span>, <span class="stringliteral">&quot;--toy_poly&quot;</span>, type=int, dest=<span class="stringliteral">&quot;toy_poly_order&quot;</span>,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        help=<span class="stringliteral">&quot;Polynomial order of toy generator fit.&quot;</span>, metavar=<span class="stringliteral">&quot;toy_poly_order&quot;</span>, default=-1)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-w&quot;</span>, <span class="stringliteral">&quot;--win&quot;</span>, type=int, dest=<span class="stringliteral">&quot;win_factor&quot;</span>,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        help=<span class="stringliteral">&quot;Window factor for determining fit window size.&quot;</span>, metavar=<span class="stringliteral">&quot;win_factor&quot;</span>, default=11)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-N&quot;</span>, <span class="stringliteral">&quot;--toys&quot;</span>, type=int, dest=<span class="stringliteral">&quot;nToys&quot;</span>,</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        help=<span class="stringliteral">&quot;Number of toy spectra to throw.&quot;</span>, metavar=<span class="stringliteral">&quot;nToys&quot;</span>, default=100)</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a4b99ff73a8a869319570237b5c57ab03">   17</a></span>&#160;parser.add_argument(<span class="stringliteral">&quot;-s&quot;</span>, <span class="stringliteral">&quot;--spec&quot;</span>, type=str, dest=<span class="stringliteral">&quot;mass_spec&quot;</span>,</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        help=<span class="stringliteral">&quot;Name of mass spectrum histogram.&quot;</span>, metavar=<span class="stringliteral">&quot;mass_spec&quot;</span>,</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        default=<span class="stringliteral">&quot;mass_tweak__p_tot_min_cut&quot;</span>)</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-a&quot;</span>, <span class="stringliteral">&quot;--sig&quot;</span>, type=int, dest=<span class="stringliteral">&quot;toy_sig_samples&quot;</span>,</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        help=<span class="stringliteral">&quot;Number of signal events to add to toy models.&quot;</span>, metavar=<span class="stringliteral">&quot;toy_sig_samples&quot;</span>,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        default=0)</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-f&quot;</span>, <span class="stringliteral">&quot;--sig_file&quot;</span>, type=str, dest=<span class="stringliteral">&quot;signal_shape_h_file&quot;</span>,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        help=<span class="stringliteral">&quot;Name of the file containing the signal shape injection histogram.&quot;</span>, metavar=<span class="stringliteral">&quot;signal_shape_h_file&quot;</span>, default=<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-g&quot;</span>, <span class="stringliteral">&quot;--sig_hist&quot;</span>, type=str, dest=<span class="stringliteral">&quot;signal_shape_h_name&quot;</span>,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        help=<span class="stringliteral">&quot;Name of the signal shape injection histogram.&quot;</span>, metavar=<span class="stringliteral">&quot;signal_shape_h_name&quot;</span>, default=<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-b&quot;</span>, <span class="stringliteral">&quot;--bkg&quot;</span>, type=int, dest=<span class="stringliteral">&quot;toy_bkg_mult&quot;</span>,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        help=<span class="stringliteral">&quot;Number of toy background events in units of the integral of the input distribution.&quot;</span>,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        metavar=<span class="stringliteral">&quot;toy_bkg_mult&quot;</span>, default=1)</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a6a1bb6ed41f44b60e7bd83b0e9945aa7">   30</a></span>&#160;parser.add_argument(<span class="stringliteral">&quot;-r&quot;</span>, <span class="stringliteral">&quot;--res_scale&quot;</span>, type=float, dest=<span class="stringliteral">&quot;res_scale&quot;</span>,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        help=<span class="stringliteral">&quot;Factor by which to scale the mass resolution.&quot;</span>, metavar=<span class="stringliteral">&quot;res_scale&quot;</span>, default=1.56)</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;parser.add_argument(<span class="stringliteral">&quot;-M&quot;</span>, <span class="stringliteral">&quot;--bkg_model&quot;</span>, type=int, dest=<span class="stringliteral">&quot;bkg_model&quot;</span>, default=<span class="stringliteral">&quot;1&quot;</span>,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        help=<span class="stringliteral">&quot;The type of background fit model. 0 = Chebyshev; 1 = Exponential Chebyshev; 2 = Legendre; 3 = Exponential Legendre.&quot;</span>, metavar=<span class="stringliteral">&quot;bkg_model&quot;</span>)</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a02eacfd40be9042ceb0f07547365203d">   34</a></span>&#160;options = parser.parse_args()</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"># Use the input file to set the output file name</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#ac6a2407c8b36528c0c0308626dafab2c">   37</a></span>&#160;histo_file = options.inFilename[0]</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a602f851bc6b7e66469757ded0bcc883e">   38</a></span>&#160;mass_hypo = options.mass_hypo/1000.0</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a448bf676d9cec8beea7ec942b1bda665">   39</a></span>&#160;poly_order = options.poly_order</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#aaeb6d041bee7e7d2ca23ed634cf7318a">   40</a></span>&#160;win_factor = options.win_factor</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a7e812b2cc9c154efce289e1d9d5dcf65">   41</a></span>&#160;toy_file = <span class="stringliteral">&#39;%s/bhToys_m%iw%ip%ir%is%i.root&#39;</span>%(options.outDir, options.mass_hypo, win_factor, poly_order, <a class="code" href="namespaceconfig_1_1bhToys__cfg.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(options.res_scale * 100), options.toy_sig_samples)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;print(<span class="stringliteral">&#39;Histo file: %s&#39;</span> % histo_file)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;print(<span class="stringliteral">&#39;Toy file: %s&#39;</span> % toy_file)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#ac483f6ce851c9ecd9fb835ff7551737c">   46</a></span>&#160;p = <a class="code" href="classHpstrConf_1_1Process.html">HpstrConf.Process</a>()</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#ae0f8262ae155d0cba15cec05d034c9e7">   48</a></span>&#160;p.run_mode = 2</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a929d203f1b0e6375eacf16ef281732bf">   49</a></span>&#160;p.skip_events = options.skip_events</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a7e223ec063df28c77178547bd0813464">   50</a></span>&#160;p.max_events = options.nevents</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">#p.max_events = 1000</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"># Library containing processors</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;p.add_library(<span class="stringliteral">&quot;libprocessors&quot;</span>)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#adbef2292aed46ef674c551e6508ba8df">   60</a></span>&#160;bhtoys = <a class="code" href="classHpstrConf_1_1Processor.html">HpstrConf.Processor</a>(<span class="stringliteral">&#39;bhtoys&#39;</span>, <span class="stringliteral">&#39;BhToysHistoProcessor&#39;</span>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;debug&quot;</span>] = 1</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;massSpectrum&quot;</span>] = options.mass_spec</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;mass_hypo&quot;</span>] = mass_hypo</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;poly_order&quot;</span>] = poly_order</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;toy_poly_order&quot;</span>] = options.toy_poly_order</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;win_factor&quot;</span>] = win_factor</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;seed&quot;</span>] = 0</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;nToys&quot;</span>] = options.nToys</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;toy_sig_samples&quot;</span>] = options.toy_sig_samples</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;toy_bkg_mult&quot;</span>] = options.toy_bkg_mult</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;res_scale&quot;</span>] = options.res_scale</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;signal_shape_h_name&quot;</span>] = options.signal_shape_h_name</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;signal_shape_h_file&quot;</span>] = options.signal_shape_h_file</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;bhtoys.parameters[<span class="stringliteral">&quot;bkg_model&quot;</span>] = options.bkg_model</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"># Sequence which the processors will run.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a3f9c3bf7e2cafc2c46df6d132ea658cc">   82</a></span>&#160;p.sequence = [bhtoys]</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a27256609f574b662639e0a8cd48b8d3a">   84</a></span>&#160;p.input_files=[histo_file]</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="namespaceconfig_1_1bhToys__cfg.html#a7882aa8b39a47102a13c2630137590d8">   85</a></span>&#160;p.output_files = [toy_file]</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;p.printProcess()</div>
<div class="ttc" id="aclassHpstrConf_1_1Process_html"><div class="ttname"><a href="classHpstrConf_1_1Process.html">HpstrConf.Process</a></div><div class="ttdoc">Process python class.</div><div class="ttdef"><b>Definition:</b> <a href="HpstrConf_8py_source.html#l00020">HpstrConf.py:20</a></div></div>
<div class="ttc" id="aclassHpstrConf_1_1Processor_html"><div class="ttname"><a href="classHpstrConf_1_1Processor.html">HpstrConf.Processor</a></div><div class="ttdoc">Processor python class.</div><div class="ttdef"><b>Definition:</b> <a href="HpstrConf_8py_source.html#l00004">HpstrConf.py:4</a></div></div>
<div class="ttc" id="anamespaceconfig_1_1bhToys__cfg_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="namespaceconfig_1_1bhToys__cfg.html#a61569f2965b7a369eb10b6d75d410d11">config.bhToys_cfg.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="bhToys__cfg_8py_source.html#l00007">bhToys_cfg.py:7</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
