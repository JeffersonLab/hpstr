<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hpstr: analysis/src/MutableTTree.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">hpstr
   </div>
   <div id="projectbrief">The Heavy Photon Search Toolkit for Reconstruction (hpstr) provides an interface to physics data from the HPS experiment saved in the LCIO format and converts it into an ROOT based format.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b8678fa8510b7ff9a55ffd4d18fd5e47.html">analysis</a></li><li class="navelem"><a class="el" href="dir_bc66cf0f7bc2a011134b03d878d297c1.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">MutableTTree.cxx</div></div>
</div><!--header-->
<div class="contents">
<a href="MutableTTree_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &lt;<a class="code" href="MutableTTree_8h.html">MutableTTree.h</a>&gt;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="foldopen" id="foldopen00003" data-start="{" data-end="}">
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a6fc48d6b4d74a4fa2dc0e723b32af8c6">    3</a></span><a class="code hl_function" href="classMutableTTree.html#a6fc48d6b4d74a4fa2dc0e723b32af8c6">MutableTTree::MutableTTree</a>(TFile* infile, std::string tree_name){</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span>   std::cout &lt;&lt; <span class="stringliteral">&quot;[MutableTTree]::Reading in tree: &quot;</span> &lt;&lt; tree_name &lt;&lt; std::endl;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span>   <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a> = (TTree*)infile-&gt;Get(tree_name.c_str()); </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span>   <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span>       std::cout &lt;&lt; <span class="stringliteral">&quot;[MutableTTree]::ERROR READING TREE &quot;</span> &lt;&lt; tree_name &lt;&lt; <span class="stringliteral">&quot; from file &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>   <a class="code hl_function" href="classMutableTTree.html#a04e59dcda3ffcd15e9b9b11214d752e5">initializeFlatTuple</a>(<a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>, <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>);</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>   <a class="code hl_variable" href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">newtree_</a> = <span class="keyword">new</span> TTree();</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>   <a class="code hl_function" href="classMutableTTree.html#a7aa56c02dd1965e9b8975f706a665423">copyTTree</a>();</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>}</div>
</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="foldopen" id="foldopen00013" data-start="{" data-end="}">
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a1836a2386c3af919676f8435053672b1">   13</a></span><span class="keywordtype">double</span> <a class="code hl_function" href="classMutableTTree.html#a1836a2386c3af919676f8435053672b1">MutableTTree::getValue</a>(std::string branch_name){</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.find(branch_name) == <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.end()){</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>        <span class="keywordflow">return</span> -9999.9;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    }</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>        <span class="keywordflow">return</span> *<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[branch_name];</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>}</div>
</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="foldopen" id="foldopen00021" data-start="{" data-end="}">
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a7aa56c02dd1965e9b8975f706a665423">   21</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a7aa56c02dd1965e9b8975f706a665423">MutableTTree::copyTTree</a>(){</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <span class="comment">//Make new TTree. Copy branches from original. Add new branch. Fill new TTree with old TTree</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <span class="keywordtype">int</span> nBr = <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>-&gt;GetListOfBranches()-&gt;GetEntries();</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iBr = 0; iBr &lt; nBr; iBr++){</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        TBranch *br = <span class="keyword">dynamic_cast&lt;</span>TBranch*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>-&gt;GetListOfBranches()-&gt;At(iBr));</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>        std::string varname = (std::string)br-&gt;GetFullName();</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>        <a class="code hl_variable" href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">newtree_</a>-&gt;Branch(varname.c_str(),<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[varname],(varname+<span class="stringliteral">&quot;/D&quot;</span>).c_str());  </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    }</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>}</div>
</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="foldopen" id="foldopen00031" data-start="{" data-end="}">
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a125ca3dc2bb650b998b2f8092c234013">   31</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a125ca3dc2bb650b998b2f8092c234013">MutableTTree::defineMassWindow</a>(<span class="keywordtype">double</span> lowMass, <span class="keywordtype">double</span> highMass){</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <a class="code hl_variable" href="classMutableTTree.html#ad6b8b2cbeed86c3fa2425467a2eef5fa">lowMass_</a> = lowMass;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <a class="code hl_variable" href="classMutableTTree.html#adc82ce333c65afb1a08e72cf329a3ad3">highMass_</a> = highMass;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>}</div>
</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="foldopen" id="foldopen00036" data-start="{" data-end="}">
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="classMutableTTree.html#ad4c39a1f92a6ddf05d1fb65bc7a43443">   36</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classMutableTTree.html#ad4c39a1f92a6ddf05d1fb65bc7a43443">MutableTTree::variableExists</a>(std::string variable){</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.find(variable) != <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.end())</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>}</div>
</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="foldopen" id="foldopen00043" data-start="{" data-end="}">
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a4f8583d3b7c681559a50353e2cd67968">   43</a></span>std::vector&lt;std::string&gt; <a class="code hl_function" href="classMutableTTree.html#a4f8583d3b7c681559a50353e2cd67968">MutableTTree::getAllVariables</a>(){</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    std::vector&lt;std::string&gt; variables;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="keywordflow">for</span>(std::map&lt;std::string,double*&gt;::iterator it = <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.begin(); it != <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.end(); it++){</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>       variables.push_back(it-&gt;first); </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    }</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="keywordflow">return</span> variables;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>}</div>
</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="foldopen" id="foldopen00052" data-start="{" data-end="}">
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="classMutableTTree.html#af5105c0eef86140ad8203af2bf159d57">   52</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#af5105c0eef86140ad8203af2bf159d57">MutableTTree::Fill</a>(){</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> e=0; e &lt; <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>-&gt;GetEntries(); e++){</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>-&gt;GetEntry(e);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <span class="comment">//Mass Window (if set)</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classMutableTTree.html#ad6b8b2cbeed86c3fa2425467a2eef5fa">lowMass_</a> != -999.9 &amp;&amp; <a class="code hl_variable" href="classMutableTTree.html#adc82ce333c65afb1a08e72cf329a3ad3">highMass_</a> != -999.9){</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="classMutableTTree.html#a1836a2386c3af919676f8435053672b1">getValue</a>(<span class="stringliteral">&quot;unc_vtx_mass&quot;</span>)*1000.0 &gt; <a class="code hl_variable" href="classMutableTTree.html#adc82ce333c65afb1a08e72cf329a3ad3">highMass_</a>) <span class="keywordflow">continue</span>; </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="classMutableTTree.html#a1836a2386c3af919676f8435053672b1">getValue</a>(<span class="stringliteral">&quot;unc_vtx_mass&quot;</span>)*1000.0 &lt; <a class="code hl_variable" href="classMutableTTree.html#ad6b8b2cbeed86c3fa2425467a2eef5fa">lowMass_</a>) <span class="keywordflow">continue</span>; </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        }</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        <span class="comment">//Apply varible shifts here</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <span class="keywordflow">for</span>(std::map&lt;std::string,std::function&lt;<span class="keywordtype">double</span>()&gt;&gt;::iterator it = <a class="code hl_variable" href="classMutableTTree.html#aed1f0997a283167ffbd7d2a6dd741185">variable_shifts_</a>.begin(); </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                it != <a class="code hl_variable" href="classMutableTTree.html#aed1f0997a283167ffbd7d2a6dd741185">variable_shifts_</a>.end(); it++){</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>            <a class="code hl_variable" href="classMutableTTree.html#aed1f0997a283167ffbd7d2a6dd741185">variable_shifts_</a>[it-&gt;first]();</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        }</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        <span class="comment">//Add new variables here</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        <span class="keywordflow">for</span>(std::map&lt;std::string,double*&gt;::iterator it = <a class="code hl_variable" href="classMutableTTree.html#af579ca072e3976565e11eae26a832f7e">new_variables_</a>.begin(); it != <a class="code hl_variable" href="classMutableTTree.html#af579ca072e3976565e11eae26a832f7e">new_variables_</a>.end(); it++){</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>            *<a class="code hl_variable" href="classMutableTTree.html#af579ca072e3976565e11eae26a832f7e">new_variables_</a>[it-&gt;first] = <a class="code hl_variable" href="classMutableTTree.html#af47b71ddca84f91a54d63949251a5f53">functions_</a>[it-&gt;first]();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <a class="code hl_variable" href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">newtree_</a>-&gt;Fill();</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a> = <a class="code hl_variable" href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">newtree_</a>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>}</div>
</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="foldopen" id="foldopen00081" data-start="{" data-end="}">
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a1fdaae294df486df6058ca78bbfbe084">   81</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a1fdaae294df486df6058ca78bbfbe084">MutableTTree::shiftVariable</a>(std::string variable, <span class="keywordtype">double</span> shift){</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[MutableTTree]::Shifting Variable &quot;</span> &lt;&lt; variable &lt;&lt; <span class="stringliteral">&quot; by &quot;</span> &lt;&lt; shift &lt;&lt; std::endl;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    std::function&lt;double()&gt; shiftVariableFunc = [&amp;,shift]()-&gt;<span class="keywordtype">double</span>{</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">return</span> *<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[variable] = *<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[variable] + shift;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    };</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <a class="code hl_variable" href="classMutableTTree.html#aed1f0997a283167ffbd7d2a6dd741185">variable_shifts_</a>[variable] = shiftVariableFunc;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>}</div>
</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="foldopen" id="foldopen00089" data-start="{" data-end="}">
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a577bd92484cb87cf329fdc0641cbe5e3">   89</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a577bd92484cb87cf329fdc0641cbe5e3">MutableTTree::addNewBranch</a>(std::string branch){</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordtype">double</span>* value = <span class="keyword">new</span> <span class="keywordtype">double</span>{999.9};</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[branch] = value;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_variable" href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">tree_</a>-&gt;Branch(branch.c_str(),<a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[branch],(branch+<span class="stringliteral">&quot;/D&quot;</span>).c_str());  </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>}</div>
</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a8481721aa11a221968d331c3bc53af57">   95</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a8481721aa11a221968d331c3bc53af57">MutableTTree::printEvent</a>(){</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="keywordflow">for</span>(std::map&lt;std::string,double*&gt;::iterator it = <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.begin(); it != <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>.end(); it ++){</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        std::cout &lt;&lt; it-&gt;first &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; *it-&gt;second &lt;&lt; std::endl;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    }</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;[MutableTree}::End print&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="foldopen" id="foldopen00102" data-start="{" data-end="}">
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="classMutableTTree.html#a04e59dcda3ffcd15e9b9b11214d752e5">  102</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#a04e59dcda3ffcd15e9b9b11214d752e5">MutableTTree::initializeFlatTuple</a>(TTree* tree, std::map&lt;std::string, double*&gt; &amp;tuple_map){</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordtype">int</span> nBr = tree-&gt;GetListOfBranches()-&gt;GetEntries();</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iBr = 0; iBr &lt; nBr; iBr++){</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        TBranch *br = <span class="keyword">dynamic_cast&lt;</span>TBranch*<span class="keyword">&gt;</span>(tree-&gt;GetListOfBranches()-&gt;At(iBr));</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        <span class="keywordtype">double</span>* value = <span class="keyword">new</span> double;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        std::string varname = (std::string)br-&gt;GetFullName();</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        tuple_map[varname] = value;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        tree-&gt;SetBranchAddress(varname.c_str(),tuple_map[varname]);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>}</div>
</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="foldopen" id="foldopen00113" data-start="{" data-end="}">
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="classMutableTTree.html#ac0aa05dd98dba7fdcce8177c05471ee8">  113</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classMutableTTree.html#ac0aa05dd98dba7fdcce8177c05471ee8">MutableTTree::addVariableToTBranch</a>(<span class="keyword">const</span> std::string&amp; variableName){</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">double</span>* variable = <span class="keyword">new</span> <span class="keywordtype">double</span>{999.9};</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[variableName] = variable;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <a class="code hl_variable" href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">newtree_</a>-&gt;Branch(variableName.c_str(), <a class="code hl_variable" href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">tuple_</a>[variableName], (variableName+<span class="stringliteral">&quot;/D&quot;</span>).c_str());</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <a class="code hl_variable" href="classMutableTTree.html#af579ca072e3976565e11eae26a832f7e">new_variables_</a>[variableName] = variable;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>}</div>
</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="ttc" id="aMutableTTree_8h_html"><div class="ttname"><a href="MutableTTree_8h.html">MutableTTree.h</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a04e59dcda3ffcd15e9b9b11214d752e5"><div class="ttname"><a href="classMutableTTree.html#a04e59dcda3ffcd15e9b9b11214d752e5">MutableTTree::initializeFlatTuple</a></div><div class="ttdeci">void initializeFlatTuple(TTree *tree, std::map&lt; std::string, double * &gt; &amp;tuple_map)</div><div class="ttdoc">read in the initial flat TTree</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00102">MutableTTree.cxx:102</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a125ca3dc2bb650b998b2f8092c234013"><div class="ttname"><a href="classMutableTTree.html#a125ca3dc2bb650b998b2f8092c234013">MutableTTree::defineMassWindow</a></div><div class="ttdeci">void defineMassWindow(double lowMass, double highMass)</div><div class="ttdoc">Set the mass window within which to read the input ttree.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00031">MutableTTree.cxx:31</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a1836a2386c3af919676f8435053672b1"><div class="ttname"><a href="classMutableTTree.html#a1836a2386c3af919676f8435053672b1">MutableTTree::getValue</a></div><div class="ttdeci">double getValue(std::string branch_name)</div><div class="ttdoc">Get the value of a flat tuple variable.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00013">MutableTTree.cxx:13</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a1fdaae294df486df6058ca78bbfbe084"><div class="ttname"><a href="classMutableTTree.html#a1fdaae294df486df6058ca78bbfbe084">MutableTTree::shiftVariable</a></div><div class="ttdeci">void shiftVariable(std::string variable, double shift)</div><div class="ttdoc">Apply any corrections to specified variable.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00081">MutableTTree.cxx:81</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a3fe91dad000ed638998560134453ea61"><div class="ttname"><a href="classMutableTTree.html#a3fe91dad000ed638998560134453ea61">MutableTTree::newtree_</a></div><div class="ttdeci">TTree * newtree_</div><div class="ttdoc">temporary ttree used to create and fill new branches</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00098">MutableTTree.h:98</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a4f8583d3b7c681559a50353e2cd67968"><div class="ttname"><a href="classMutableTTree.html#a4f8583d3b7c681559a50353e2cd67968">MutableTTree::getAllVariables</a></div><div class="ttdeci">std::vector&lt; std::string &gt; getAllVariables()</div><div class="ttdoc">Get list of all variables defined in ttree.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00043">MutableTTree.cxx:43</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a577bd92484cb87cf329fdc0641cbe5e3"><div class="ttname"><a href="classMutableTTree.html#a577bd92484cb87cf329fdc0641cbe5e3">MutableTTree::addNewBranch</a></div><div class="ttdeci">void addNewBranch(std::string branch)</div><div class="ttdoc">Add new branch to ttree.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00089">MutableTTree.cxx:89</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a5953b7896f712a1cc6c7495d7f887fe3"><div class="ttname"><a href="classMutableTTree.html#a5953b7896f712a1cc6c7495d7f887fe3">MutableTTree::tree_</a></div><div class="ttdeci">TTree * tree_</div><div class="ttdoc">flat ttree</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00097">MutableTTree.h:97</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a6fc48d6b4d74a4fa2dc0e723b32af8c6"><div class="ttname"><a href="classMutableTTree.html#a6fc48d6b4d74a4fa2dc0e723b32af8c6">MutableTTree::MutableTTree</a></div><div class="ttdeci">MutableTTree(TFile *infile, std::string tree_name)</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00003">MutableTTree.cxx:3</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a7aa56c02dd1965e9b8975f706a665423"><div class="ttname"><a href="classMutableTTree.html#a7aa56c02dd1965e9b8975f706a665423">MutableTTree::copyTTree</a></div><div class="ttdeci">void copyTTree()</div><div class="ttdoc">copy the TTree</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00021">MutableTTree.cxx:21</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_a8481721aa11a221968d331c3bc53af57"><div class="ttname"><a href="classMutableTTree.html#a8481721aa11a221968d331c3bc53af57">MutableTTree::printEvent</a></div><div class="ttdeci">void printEvent()</div><div class="ttdoc">Print TTree Event.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00095">MutableTTree.cxx:95</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_ab6ef83b81917bc48ece24dc1aa6349fe"><div class="ttname"><a href="classMutableTTree.html#ab6ef83b81917bc48ece24dc1aa6349fe">MutableTTree::tuple_</a></div><div class="ttdeci">std::map&lt; std::string, double * &gt; tuple_</div><div class="ttdoc">holds all variables and values</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00099">MutableTTree.h:99</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_ac0aa05dd98dba7fdcce8177c05471ee8"><div class="ttname"><a href="classMutableTTree.html#ac0aa05dd98dba7fdcce8177c05471ee8">MutableTTree::addVariableToTBranch</a></div><div class="ttdeci">void addVariableToTBranch(const std::string &amp;variableName)</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00113">MutableTTree.cxx:113</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_ad4c39a1f92a6ddf05d1fb65bc7a43443"><div class="ttname"><a href="classMutableTTree.html#ad4c39a1f92a6ddf05d1fb65bc7a43443">MutableTTree::variableExists</a></div><div class="ttdeci">bool variableExists(std::string variable)</div><div class="ttdoc">Check if a variable exists in the ttree.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00036">MutableTTree.cxx:36</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_ad6b8b2cbeed86c3fa2425467a2eef5fa"><div class="ttname"><a href="classMutableTTree.html#ad6b8b2cbeed86c3fa2425467a2eef5fa">MutableTTree::lowMass_</a></div><div class="ttdeci">double lowMass_</div><div class="ttdoc">mass window low</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00118">MutableTTree.h:118</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_adc82ce333c65afb1a08e72cf329a3ad3"><div class="ttname"><a href="classMutableTTree.html#adc82ce333c65afb1a08e72cf329a3ad3">MutableTTree::highMass_</a></div><div class="ttdeci">double highMass_</div><div class="ttdoc">mass window high</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00119">MutableTTree.h:119</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_aed1f0997a283167ffbd7d2a6dd741185"><div class="ttname"><a href="classMutableTTree.html#aed1f0997a283167ffbd7d2a6dd741185">MutableTTree::variable_shifts_</a></div><div class="ttdeci">std::map&lt; std::string, std::function&lt; double()&gt; &gt; variable_shifts_</div><div class="ttdoc">variable corrections</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00103">MutableTTree.h:103</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_af47b71ddca84f91a54d63949251a5f53"><div class="ttname"><a href="classMutableTTree.html#af47b71ddca84f91a54d63949251a5f53">MutableTTree::functions_</a></div><div class="ttdeci">std::map&lt; std::string, std::function&lt; double()&gt; &gt; functions_</div><div class="ttdoc">functions that calculate new variables</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00102">MutableTTree.h:102</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_af5105c0eef86140ad8203af2bf159d57"><div class="ttname"><a href="classMutableTTree.html#af5105c0eef86140ad8203af2bf159d57">MutableTTree::Fill</a></div><div class="ttdeci">void Fill()</div><div class="ttdoc">Fill ttree with new variables included.</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8cxx_source.html#l00052">MutableTTree.cxx:52</a></div></div>
<div class="ttc" id="aclassMutableTTree_html_af579ca072e3976565e11eae26a832f7e"><div class="ttname"><a href="classMutableTTree.html#af579ca072e3976565e11eae26a832f7e">MutableTTree::new_variables_</a></div><div class="ttdeci">std::map&lt; std::string, double * &gt; new_variables_</div><div class="ttdoc">list of new variables</div><div class="ttdef"><b>Definition</b> <a href="MutableTTree_8h_source.html#l00101">MutableTTree.h:101</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
