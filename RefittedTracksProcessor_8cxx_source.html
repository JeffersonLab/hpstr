<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hpstr: processors/src/RefittedTracksProcessor.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hpstr
   </div>
   <div id="projectbrief">The Heavy Photon Search Toolkit for Reconstruction (hpstr) provides an interface to physics data from the HPS experiment saved in the LCIO format and converts it into an ROOT based format.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4ac0cf52b60bedb296701740c5b274e6.html">processors</a></li><li class="navelem"><a class="el" href="dir_f51cfae32239c0a2b15b7972d5cbb270.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RefittedTracksProcessor.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RefittedTracksProcessor_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RefittedTracksProcessor_8h.html">RefittedTracksProcessor.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utilities_8h.html">utilities.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#ae517ed325f2d7560ddf437b556c90340">    6</a></span>&#160;<a class="code" href="classRefittedTracksProcessor.html#ae517ed325f2d7560ddf437b556c90340">RefittedTracksProcessor::RefittedTracksProcessor</a>(<span class="keyword">const</span> std::string&amp; name, <a class="code" href="classProcess.html">Process</a>&amp; process)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    : <a class="code" href="classProcessor.html">Processor</a>(name, process) { </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>       = <span class="keyword">new</span> <a class="code" href="classTrackHistos.html">TrackHistos</a>(<span class="stringliteral">&quot;trk&quot;</span>);</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>          = <span class="keyword">new</span> <a class="code" href="classTrackHistos.html">TrackHistos</a>(<span class="stringliteral">&quot;refit&quot;</span>);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>    = <span class="keyword">new</span> <a class="code" href="classTrackHistos.html">TrackHistos</a>(<span class="stringliteral">&quot;refit_z0&quot;</span>);</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>  = <span class="keyword">new</span> <a class="code" href="classTrackHistos.html">TrackHistos</a>(<span class="stringliteral">&quot;refit_chi2&quot;</span>);</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;}</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#aa870fb1e653f4471a76fa76d13aedc8a">   15</a></span>&#160;<a class="code" href="classRefittedTracksProcessor.html#aa870fb1e653f4471a76fa76d13aedc8a">RefittedTracksProcessor::~RefittedTracksProcessor</a>() { </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;}</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#a28936b5e7dad5cac4572c2e47464519e">   19</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRefittedTracksProcessor.html#a28936b5e7dad5cac4572c2e47464519e">RefittedTracksProcessor::configure</a>(<span class="keyword">const</span> <a class="code" href="classParameterSet.html">ParameterSet</a>&amp; <a class="code" href="namespaceconfig_1_1anaKalSimpTuple__cfg.html#ad827090038061f4a04a789ab61df8c1d">parameters</a>) {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">histoCfg_</a> = <a class="code" href="namespaceconfig_1_1anaKalSimpTuple__cfg.html#ad827090038061f4a04a789ab61df8c1d">parameters</a>.getString(<span class="stringliteral">&quot;histoCfg&quot;</span>);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#a4c88c2e0a2a6510211fbc4155ba12fd4">   24</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRefittedTracksProcessor.html#a4c88c2e0a2a6510211fbc4155ba12fd4">RefittedTracksProcessor::initialize</a>(TTree* tree) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    tree-&gt;Branch(<span class="stringliteral">&quot;GBLRefittedTracks&quot;</span>, &amp;<a class="code" href="classRefittedTracksProcessor.html#a3f3a939d042111df16aa325b12581e68">tracks_</a>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    tree-&gt;Branch(<span class="stringliteral">&quot;V0Vertices&quot;</span>, &amp;<a class="code" href="classRefittedTracksProcessor.html#a16390457bc75da97bf36f309a2d6559f">vertices_</a>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    tree-&gt;Branch(<span class="stringliteral">&quot;V0Vertices_refit&quot;</span>, &amp;<a class="code" href="classRefittedTracksProcessor.html#a16adc3b67a3ae3bbb99041d99abed8fe">vertices_refit_</a>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">//Original hists</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#ac49873e57b0f6b48c50b6b9f3faeefa1">loadHistoConfig</a>(<a class="code" href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">histoCfg_</a>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a9b93e77fcde402a366c1b69d5a234f14">doTrackComparisonPlots</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#a14d9cc986fb225a1a68a03317f112a85">DefineHistos</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">//Refit hists</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#ac49873e57b0f6b48c50b6b9f3faeefa1">loadHistoConfig</a>(<a class="code" href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">histoCfg_</a>);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a9b93e77fcde402a366c1b69d5a234f14">doTrackComparisonPlots</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#a14d9cc986fb225a1a68a03317f112a85">DefineHistos</a>();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#aa0c8ed67148888b30aeec6405b8b16bd">Define2DHistos</a>();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">//Refit hists with z0 closer to 0</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classHistoManager.html#ac49873e57b0f6b48c50b6b9f3faeefa1">loadHistoConfig</a>(<a class="code" href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">histoCfg_</a>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classTrackHistos.html#a9b93e77fcde402a366c1b69d5a234f14">doTrackComparisonPlots</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classHistoManager.html#a14d9cc986fb225a1a68a03317f112a85">DefineHistos</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classTrackHistos.html#aa0c8ed67148888b30aeec6405b8b16bd">Define2DHistos</a>();</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">//Refit hists with z0 closer to 0</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classHistoManager.html#ac49873e57b0f6b48c50b6b9f3faeefa1">loadHistoConfig</a>(<a class="code" href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">histoCfg_</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classTrackHistos.html#a9b93e77fcde402a366c1b69d5a234f14">doTrackComparisonPlots</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classHistoManager.html#a14d9cc986fb225a1a68a03317f112a85">DefineHistos</a>();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classTrackHistos.html#aa0c8ed67148888b30aeec6405b8b16bd">Define2DHistos</a>();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#a0ce1dcd521fc7f9b80998c309256f888">   61</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classProcessor.html#a7017ddc30577ae1cdf3941090fe9f4b4">RefittedTracksProcessor::process</a>(<a class="code" href="classIEvent.html">IEvent</a>* ievent) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a3f3a939d042111df16aa325b12581e68">tracks_</a>.clear();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a32d1c4f4caa8e8f0194ee3d650da0a84">refit_tracks_</a>.clear();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a16390457bc75da97bf36f309a2d6559f">vertices_</a>.clear();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a16adc3b67a3ae3bbb99041d99abed8fe">vertices_refit_</a>.clear();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classEvent.html">Event</a>* <span class="keyword">event</span> = <span class="keyword">static_cast&lt;</span><a class="code" href="classEvent.html">Event</a>*<span class="keyword">&gt;</span> (ievent);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">//Get all the tracks</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    EVENT::LCCollection* <a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>       = <span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#a3fe28416324ba7aea8e8eea751994f09">Collections::GBL_TRACKS</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">//Get all the 3D hits </span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    EVENT::LCCollection* trackerHits  = <span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#ae6d1aff4543b52dde51846df0383ba5a">Collections::TRACKER_HITS</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">//Get all the rawHits fits</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    EVENT::LCCollection* raw_svt_hit_fits = <span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#a4223ced1aa16409b7f9f1630335c74b8">Collections::RAW_SVT_HIT_FITS</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">//Grab the vertices and the vtx candidates</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    EVENT::LCCollection* u_vtx_candidates = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    EVENT::LCCollection* u_vtxs = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceutils.html#a3fa61a8f1fe762d57473f3193181a256">utils::hasCollection</a>(event-&gt;getLCEvent(),<a class="code" href="namespaceCollections.html#a2beb95bd7784a211d3d9ebaf7f894a1f">Collections::UC_V0CANDIDATES</a>)) { </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">//Get the vertex candidates</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        u_vtx_candidates  = <span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#a2beb95bd7784a211d3d9ebaf7f894a1f">Collections::UC_V0CANDIDATES</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">//Get the vertices </span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        u_vtxs = <span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#a6f34f4fdcac7049c52193ceb79629d7b">Collections::UC_V0VERTICES</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ivtx = 0 ; ivtx &lt; u_vtxs-&gt;getNumberOfElements(); ++ivtx) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <a class="code" href="classVertex.html">Vertex</a>* <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#a0ba66fed21d976c0b188b1e975cb94c0">vtx</a> = <a class="code" href="namespaceutils.html#a38245351b04f5e711d627819b932fbd4">utils::buildVertex</a>(<span class="keyword">static_cast&lt;</span>EVENT::Vertex*<span class="keyword">&gt;</span>(u_vtxs-&gt;getElementAt(ivtx)));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a16390457bc75da97bf36f309a2d6559f">vertices_</a>.push_back(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#a0ba66fed21d976c0b188b1e975cb94c0">vtx</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(<span class="keyword">nullptr</span>,<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#a0ba66fed21d976c0b188b1e975cb94c0">vtx</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#aaddcc8ff9b59c3f9d0036e5145f4fd10">Fill1DHisto</a>(<span class="stringliteral">&quot;n_vertices_h&quot;</span>,u_vtxs-&gt;getNumberOfElements());</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">//Grab the vertices and the vtx candidates</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    EVENT::LCCollection* u_vtx_candidates_r = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    EVENT::LCCollection* u_vtxs_r = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceutils.html#a3fa61a8f1fe762d57473f3193181a256">utils::hasCollection</a>(event-&gt;getLCEvent(),<span class="stringliteral">&quot;UnconstrainedV0Candidates_refit&quot;</span>)) { </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">//Get the vertex candidates</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        u_vtx_candidates_r  = <span class="keyword">event</span>-&gt;getLCCollection(<span class="stringliteral">&quot;UnconstrainedV0Candidates_refit&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">//Get the vertices </span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        u_vtxs_r = <span class="keyword">event</span>-&gt;getLCCollection(<span class="stringliteral">&quot;UnconstrainedV0Vertices_refit&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ivtx = 0 ; ivtx &lt; u_vtxs_r-&gt;getNumberOfElements(); ++ivtx) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <a class="code" href="classVertex.html">Vertex</a>* vtx_r = <a class="code" href="namespaceutils.html#a38245351b04f5e711d627819b932fbd4">utils::buildVertex</a>(<span class="keyword">static_cast&lt;</span>EVENT::Vertex*<span class="keyword">&gt;</span>(u_vtxs_r-&gt;getElementAt(ivtx)));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a16adc3b67a3ae3bbb99041d99abed8fe">vertices_refit_</a>.push_back(vtx_r);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(<span class="keyword">nullptr</span>,vtx_r);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#aaddcc8ff9b59c3f9d0036e5145f4fd10">Fill1DHisto</a>(<span class="stringliteral">&quot;n_vertices_h&quot;</span>,u_vtxs_r-&gt;getNumberOfElements());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">//Initialize map of shared hits</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    std::map &lt;int, std::vector&lt;int&gt; &gt; SharedHits;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">//TODO: can we do better? (innermost)</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    std::map &lt;int, bool&gt; SharedHitsLy0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    std::map &lt;int, bool&gt; SharedHitsLy1;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> itrack = 0; itrack &lt; <a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getNumberOfElements();++itrack) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        SharedHits[itrack]   = {};</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        SharedHitsLy0[itrack] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        SharedHitsLy1[itrack] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#aaddcc8ff9b59c3f9d0036e5145f4fd10">Fill1DHisto</a>(<span class="stringliteral">&quot;n_tracks_h&quot;</span>,<a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getNumberOfElements());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// Loop over all the LCIO Tracks and add them to the HPS event.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> itrack = 0; itrack &lt; <a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getNumberOfElements(); ++itrack) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">// Get a LCIO Track from the LCIO event</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        EVENT::Track* lc_track = <span class="keyword">static_cast&lt;</span>EVENT::Track*<span class="keyword">&gt;</span>(<a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getElementAt(itrack));</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// Get the GBL kink data</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        EVENT::LCCollection* gbl_kink_data = </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keyword">static_cast&lt;</span>EVENT::LCCollection*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#aaf43e77b4035ce5cc42833e469a733ab">Collections::KINK_DATA_REL</a>));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// Get the track data</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        EVENT::LCCollection* track_data = <span class="keyword">static_cast&lt;</span>EVENT::LCCollection*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;getLCCollection(<a class="code" href="namespaceCollections.html#aab08f4630a9364f2df4a5343c45adea4">Collections::TRACK_DATA_REL</a>));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// Add a track to the event</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classTrack.html">Track</a>* <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a> = <a class="code" href="namespaceutils.html#a721ed160b22a3a70f98dba79789df5c9">utils::buildTrack</a>(lc_track, gbl_kink_data, track_data);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">//Get the refitted tracks relations</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        EVENT::LCCollection* refitted_tracks_rel = </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keyword">static_cast&lt;</span>EVENT::LCCollection*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;getLCCollection(<span class="stringliteral">&quot;GBLTrackToGBLTrackRefitRelations&quot;</span>));</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">//Build the navigator</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        UTIL::LCRelationNavigator* refitted_tracks_nav = <span class="keyword">new</span> UTIL::LCRelationNavigator(refitted_tracks_rel);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment">//Get the list of data</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        EVENT::LCObjectVec refitted_tracks_list = refitted_tracks_nav -&gt; getRelatedToObjects(lc_track);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;=========================================&quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;=========================================&quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;Track params:           &quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">//track-&gt;Print();</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">//Get the tracker hits</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        EVENT::TrackerHitVec lc_tracker_hits = lc_track-&gt;getTrackerHits();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">//Build the vector of Tracker Hits on track, get the info and attach them to the track. </span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ith = 0; ith&lt;lc_tracker_hits.size();ith++) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            IMPL::TrackerHitImpl* lc_th = <span class="keyword">static_cast&lt;</span>IMPL::TrackerHitImpl*<span class="keyword">&gt;</span>(lc_tracker_hits.at(ith));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="classTrackerHit.html">TrackerHit</a>* th = <a class="code" href="namespaceutils.html#a6bd5c589b49d0a2b2404965d82f7fe51">utils::buildTrackerHit</a>(lc_th);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="comment">//TODO should check the status of this return</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="namespaceutils.html#a434b38abbf31e8df9d32eda0de82e2f9">utils::addRawInfoTo3dHit</a>(th,lc_th,raw_svt_hit_fits);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">//TODO this should be under some sort of saving flag</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;addHit(th);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a85a0416b17d2d9a674b52dd52ac27949">hits_</a>.push_back(th);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">//Get shared Hits information</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> jtrack = itrack+1; jtrack &lt; <a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getNumberOfElements(); ++jtrack) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                EVENT::Track* j_lc_track = <span class="keyword">static_cast&lt;</span>EVENT::Track*<span class="keyword">&gt;</span>(<a class="code" href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">tracks</a>-&gt;getElementAt(jtrack));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespaceutils.html#a5e1646b6a827eb4b57b130766d574583">utils::isUsedByTrack</a>(th,j_lc_track)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="comment">//The hit is not already in the shared list</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <span class="keywordflow">if</span> (std::find(SharedHits[itrack].begin(), SharedHits[itrack].end(),th-&gt;<a class="code" href="classTrackerHit.html#a9c9659a6c6ba66b4107ba59c95a24241">getID</a>()) == SharedHits[itrack].end()) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        SharedHits[itrack].push_back(th-&gt;<a class="code" href="classTrackerHit.html#a9c9659a6c6ba66b4107ba59c95a24241">getID</a>());</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        <span class="keywordflow">if</span> (th-&gt;<a class="code" href="classTrackerHit.html#a17a9ca6d361f5e7cdc116c35d699e61f">getLayer</a>() == 0 )</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                            SharedHitsLy0[itrack] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        <span class="keywordflow">if</span> (th-&gt;<a class="code" href="classTrackerHit.html#a17a9ca6d361f5e7cdc116c35d699e61f">getLayer</a>() == 1 ) </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                            SharedHitsLy1[itrack] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    <span class="keywordflow">if</span> (std::find(SharedHits[jtrack].begin(), SharedHits[jtrack].end(),th-&gt;<a class="code" href="classTrackerHit.html#a9c9659a6c6ba66b4107ba59c95a24241">getID</a>()) == SharedHits[jtrack].end()) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        SharedHits[jtrack].push_back(th-&gt;<a class="code" href="classTrackerHit.html#a9c9659a6c6ba66b4107ba59c95a24241">getID</a>());</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        <span class="keywordflow">if</span> (th-&gt;<a class="code" href="classTrackerHit.html#a17a9ca6d361f5e7cdc116c35d699e61f">getLayer</a>() == 0 ) </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                            SharedHitsLy0[jtrack] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        <span class="keywordflow">if</span> (th-&gt;<a class="code" href="classTrackerHit.html#a17a9ca6d361f5e7cdc116c35d699e61f">getLayer</a>() == 1 ) </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                            SharedHitsLy1[jtrack] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                } <span class="comment">// found shared hit</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            } <span class="comment">// loop on j&gt;i tracks</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        } <span class="comment">// loop on hits on track i</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">//TODO:: bug prone?</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;setNShared(SharedHits[itrack].size());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;setSharedLy0(SharedHitsLy0[itrack]);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;setSharedLy1(SharedHitsLy1[itrack]);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;Tracker hits time:&quot;;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">//for (auto lc_tracker_hit : lc_tracker_hits) { </span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot; &quot;&lt;&lt;lc_tracker_hit-&gt;getTime();</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">//std::cout&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (refitted_tracks_list.size() &lt; 1)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">//Get only best X2 refit track</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">int</span> bestX2index = -999;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordtype">float</span> bestX2 = -999;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> irtrk = 0; irtrk&lt;refitted_tracks_list.size(); irtrk++) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            EVENT::Track* lc_rfit_track = <span class="keyword">static_cast&lt;</span>EVENT::Track*<span class="keyword">&gt;</span>(refitted_tracks_list.at(irtrk));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> (irtrk == 0) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                bestX2 = (lc_rfit_track-&gt;getChi2() / lc_rfit_track-&gt;getNdf());</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                bestX2index = 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keywordflow">if</span> ((lc_rfit_track-&gt;getChi2() / lc_rfit_track-&gt;getNdf()) &lt; bestX2) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    bestX2 = (lc_rfit_track-&gt;getChi2() / lc_rfit_track-&gt;getNdf());</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    bestX2index = irtrk;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classHistoManager.html#aaddcc8ff9b59c3f9d0036e5145f4fd10">Fill1DHisto</a>(<span class="stringliteral">&quot;n_tracks_h&quot;</span>,refitted_tracks_list.size());</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> irtrk = 0; irtrk &lt; refitted_tracks_list.size(); irtrk++) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">if</span> (irtrk != bestX2index)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            EVENT::Track* lc_rfit_track = <span class="keyword">static_cast&lt;</span>EVENT::Track*<span class="keyword">&gt;</span>(refitted_tracks_list.at(irtrk));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="comment">//Useless to get it every track</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">// Get the GBL kink data</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            EVENT::LCCollection* rfit_gbl_kink_data = </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keyword">static_cast&lt;</span>EVENT::LCCollection*<span class="keyword">&gt;</span>(<span class="keyword">event</span>-&gt;getLCCollection(<span class="stringliteral">&quot;GBLKinkDataRelations_refit&quot;</span>));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">// Get the track data</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            EVENT::LCCollection* rfit_track_data = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="classTrack.html">Track</a>* rfit_track = <a class="code" href="namespaceutils.html#a721ed160b22a3a70f98dba79789df5c9">utils::buildTrack</a>(lc_rfit_track,rfit_gbl_kink_data,rfit_track_data);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            EVENT::TrackerHitVec lc_rf_tracker_hits = lc_rfit_track-&gt;getTrackerHits();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="comment">//TODO::move to utilities</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="comment">//recompute time if missing information</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordtype">float</span> mean = 0.0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> lc_rf_tracker_hit : lc_rf_tracker_hits) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                mean += lc_rf_tracker_hit-&gt;getTime();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            rfit_track-&gt;<a class="code" href="classTrack.html#aa0f1693bfca15b6510027f6041be6bcd">setTrackTime</a>(mean / lc_rf_tracker_hits.size());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="comment">//std::cout&lt;&lt;&quot;Refitted tracks params: &quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">//rfit_track-&gt;Print();      </span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="comment">//std::cout&lt;&lt;&quot;Tracker hits time:&quot;;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">//for (auto lc_rf_tracker_hit : lc_rf_tracker_hits) { </span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="comment">//std::cout&lt;&lt;&quot; &quot;&lt;&lt;lc_rf_tracker_hit-&gt;getTime();</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="comment">//}</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="comment">//std::cout&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(rfit_track);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>-&gt;<a class="code" href="classTrackHistos.html#a3b1a7887517840397d3dae8fa25e3cb4">FillTrackComparisonHistograms</a>(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>,rfit_track);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span> (fabs(rfit_track-&gt;<a class="code" href="classTrack.html#ac657325cfc2596e354e5262a9c264526">getZ0</a>()) &lt; fabs(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;getZ0())) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(rfit_track);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>-&gt;<a class="code" href="classTrackHistos.html#a3b1a7887517840397d3dae8fa25e3cb4">FillTrackComparisonHistograms</a>(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>,rfit_track);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span> (rfit_track-&gt;<a class="code" href="classTrack.html#a4f0ac38a52ef74d7167b02e514d2232d">getChi2Ndf</a>() &lt; <a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>-&gt;getChi2Ndf()) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">Fill1DHistograms</a>(rfit_track);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a>-&gt;<a class="code" href="classTrackHistos.html#a3b1a7887517840397d3dae8fa25e3cb4">FillTrackComparisonHistograms</a>(<a class="code" href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">track</a>,rfit_track);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }<span class="comment">//loop on refit tracks</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }<span class="comment">//Loop on tracks</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classRefittedTracksProcessor.html#a32d626626eee0bc4ade146973f6abb1c">  288</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRefittedTracksProcessor.html#a32d626626eee0bc4ade146973f6abb1c">RefittedTracksProcessor::finalize</a>() { </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">_OriginalTrkHistos</a>      -&gt;<a class="code" href="classHistoManager.html#aee2310abd744257ed230e751c53eacdb">saveHistos</a>();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">_RefitTrkHistos</a>         -&gt;<a class="code" href="classHistoManager.html#aee2310abd744257ed230e751c53eacdb">saveHistos</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">_RefitTrkHistos_z0cut</a>   -&gt;<a class="code" href="classHistoManager.html#aee2310abd744257ed230e751c53eacdb">saveHistos</a>();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">_RefitTrkHistos_chi2cut</a> -&gt;<a class="code" href="classHistoManager.html#aee2310abd744257ed230e751c53eacdb">saveHistos</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="RefittedTracksProcessor_8cxx.html#a7cc9dda5492f3bb34a53538c99c75959">  297</a></span>&#160;<a class="code" href="RefittedTracksProcessor_8cxx.html#a7cc9dda5492f3bb34a53538c99c75959">DECLARE_PROCESSOR</a>(<a class="code" href="classRefittedTracksProcessor.html">RefittedTracksProcessor</a>); </div>
<div class="ttc" id="aRefittedTracksProcessor_8cxx_html_a7cc9dda5492f3bb34a53538c99c75959"><div class="ttname"><a href="RefittedTracksProcessor_8cxx.html#a7cc9dda5492f3bb34a53538c99c75959">DECLARE_PROCESSOR</a></div><div class="ttdeci">DECLARE_PROCESSOR(RefittedTracksProcessor)</div></div>
<div class="ttc" id="aRefittedTracksProcessor_8h_html"><div class="ttname"><a href="RefittedTracksProcessor_8h.html">RefittedTracksProcessor.h</a></div></div>
<div class="ttc" id="aclassEvent_html"><div class="ttname"><a href="classEvent.html">Event</a></div><div class="ttdef"><b>Definition:</b> <a href="Event_8h_source.html#l00035">Event.h:35</a></div></div>
<div class="ttc" id="aclassHistoManager_html_a14d9cc986fb225a1a68a03317f112a85"><div class="ttname"><a href="classHistoManager.html#a14d9cc986fb225a1a68a03317f112a85">HistoManager::DefineHistos</a></div><div class="ttdeci">virtual void DefineHistos()</div><div class="ttdoc">Definition of histograms from json config.</div><div class="ttdef"><b>Definition:</b> <a href="HistoManager_8cxx_source.html#l00051">HistoManager.cxx:51</a></div></div>
<div class="ttc" id="aclassHistoManager_html_aaddcc8ff9b59c3f9d0036e5145f4fd10"><div class="ttname"><a href="classHistoManager.html#aaddcc8ff9b59c3f9d0036e5145f4fd10">HistoManager::Fill1DHisto</a></div><div class="ttdeci">void Fill1DHisto(const std::string &amp;histoName, float value, float weight=1.)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="HistoManager_8cxx_source.html#l00329">HistoManager.cxx:329</a></div></div>
<div class="ttc" id="aclassHistoManager_html_ac49873e57b0f6b48c50b6b9f3faeefa1"><div class="ttname"><a href="classHistoManager.html#ac49873e57b0f6b48c50b6b9f3faeefa1">HistoManager::loadHistoConfig</a></div><div class="ttdeci">virtual void loadHistoConfig(const std::string histoConfigFile)</div><div class="ttdoc">load histogram config</div><div class="ttdef"><b>Definition:</b> <a href="HistoManager_8cxx_source.html#l00346">HistoManager.cxx:346</a></div></div>
<div class="ttc" id="aclassHistoManager_html_aee2310abd744257ed230e751c53eacdb"><div class="ttname"><a href="classHistoManager.html#aee2310abd744257ed230e751c53eacdb">HistoManager::saveHistos</a></div><div class="ttdeci">virtual void saveHistos(TFile *outF=nullptr, std::string folder=&quot;&quot;)</div><div class="ttdoc">save histograms</div><div class="ttdef"><b>Definition:</b> <a href="HistoManager_8cxx_source.html#l00361">HistoManager.cxx:361</a></div></div>
<div class="ttc" id="aclassIEvent_html"><div class="ttname"><a href="classIEvent.html">IEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="IEvent_8h_source.html#l00007">IEvent.h:7</a></div></div>
<div class="ttc" id="aclassParameterSet_html"><div class="ttname"><a href="classParameterSet.html">ParameterSet</a></div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="ParameterSet_8h_source.html#l00022">ParameterSet.h:22</a></div></div>
<div class="ttc" id="aclassProcess_html"><div class="ttname"><a href="classProcess.html">Process</a></div><div class="ttdef"><b>Definition:</b> <a href="Process_8h_source.html#l00029">Process.h:29</a></div></div>
<div class="ttc" id="aclassProcessor_html"><div class="ttname"><a href="classProcessor.html">Processor</a></div><div class="ttdoc">Base class for all event processing components.</div><div class="ttdef"><b>Definition:</b> <a href="Processor_8h_source.html#l00034">Processor.h:34</a></div></div>
<div class="ttc" id="aclassProcessor_html_a7017ddc30577ae1cdf3941090fe9f4b4"><div class="ttname"><a href="classProcessor.html#a7017ddc30577ae1cdf3941090fe9f4b4">Processor::process</a></div><div class="ttdeci">virtual bool process()</div><div class="ttdoc">Process the histograms and generate analysis output.</div><div class="ttdef"><b>Definition:</b> <a href="Processor_8h_source.html#l00095">Processor.h:95</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html"><div class="ttname"><a href="classRefittedTracksProcessor.html">RefittedTracksProcessor</a></div><div class="ttdoc">Insert description here. more details.</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00047">RefittedTracksProcessor.h:47</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a126254714212e383ba1b63fe0f6c17ab"><div class="ttname"><a href="classRefittedTracksProcessor.html#a126254714212e383ba1b63fe0f6c17ab">RefittedTracksProcessor::histoCfg_</a></div><div class="ttdeci">std::string histoCfg_</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00116">RefittedTracksProcessor.h:116</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a16390457bc75da97bf36f309a2d6559f"><div class="ttname"><a href="classRefittedTracksProcessor.html#a16390457bc75da97bf36f309a2d6559f">RefittedTracksProcessor::vertices_</a></div><div class="ttdeci">std::vector&lt; Vertex * &gt; vertices_</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00106">RefittedTracksProcessor.h:106</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a16adc3b67a3ae3bbb99041d99abed8fe"><div class="ttname"><a href="classRefittedTracksProcessor.html#a16adc3b67a3ae3bbb99041d99abed8fe">RefittedTracksProcessor::vertices_refit_</a></div><div class="ttdeci">std::vector&lt; Vertex * &gt; vertices_refit_</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00108">RefittedTracksProcessor.h:108</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a28936b5e7dad5cac4572c2e47464519e"><div class="ttname"><a href="classRefittedTracksProcessor.html#a28936b5e7dad5cac4572c2e47464519e">RefittedTracksProcessor::configure</a></div><div class="ttdeci">virtual void configure(const ParameterSet &amp;parameters)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8cxx_source.html#l00019">RefittedTracksProcessor.cxx:19</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a32d1c4f4caa8e8f0194ee3d650da0a84"><div class="ttname"><a href="classRefittedTracksProcessor.html#a32d1c4f4caa8e8f0194ee3d650da0a84">RefittedTracksProcessor::refit_tracks_</a></div><div class="ttdeci">std::vector&lt; Track * &gt; refit_tracks_</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00097">RefittedTracksProcessor.h:97</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a32d626626eee0bc4ade146973f6abb1c"><div class="ttname"><a href="classRefittedTracksProcessor.html#a32d626626eee0bc4ade146973f6abb1c">RefittedTracksProcessor::finalize</a></div><div class="ttdeci">virtual void finalize()</div><div class="ttdoc">Callback for the Processor to take any necessary action when the processing of events finishes.</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8cxx_source.html#l00288">RefittedTracksProcessor.cxx:288</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a3f3a939d042111df16aa325b12581e68"><div class="ttname"><a href="classRefittedTracksProcessor.html#a3f3a939d042111df16aa325b12581e68">RefittedTracksProcessor::tracks_</a></div><div class="ttdeci">std::vector&lt; Track * &gt; tracks_</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00094">RefittedTracksProcessor.h:94</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a4c88c2e0a2a6510211fbc4155ba12fd4"><div class="ttname"><a href="classRefittedTracksProcessor.html#a4c88c2e0a2a6510211fbc4155ba12fd4">RefittedTracksProcessor::initialize</a></div><div class="ttdeci">virtual void initialize(TTree *tree)</div><div class="ttdoc">Callback for the Processor to take any necessary action when the processing of events starts.</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8cxx_source.html#l00024">RefittedTracksProcessor.cxx:24</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a5fb39e4db69be902634f49716abe7a7c"><div class="ttname"><a href="classRefittedTracksProcessor.html#a5fb39e4db69be902634f49716abe7a7c">RefittedTracksProcessor::_OriginalTrkHistos</a></div><div class="ttdeci">TrackHistos * _OriginalTrkHistos</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00112">RefittedTracksProcessor.h:112</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a6dff38a01ed5e4870d64145fbccc2115"><div class="ttname"><a href="classRefittedTracksProcessor.html#a6dff38a01ed5e4870d64145fbccc2115">RefittedTracksProcessor::_RefitTrkHistos</a></div><div class="ttdeci">TrackHistos * _RefitTrkHistos</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00113">RefittedTracksProcessor.h:113</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a85a0416b17d2d9a674b52dd52ac27949"><div class="ttname"><a href="classRefittedTracksProcessor.html#a85a0416b17d2d9a674b52dd52ac27949">RefittedTracksProcessor::hits_</a></div><div class="ttdeci">std::vector&lt; TrackerHit * &gt; hits_</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00100">RefittedTracksProcessor.h:100</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_a86d1fca7ab68cbe29677b6688e8d128f"><div class="ttname"><a href="classRefittedTracksProcessor.html#a86d1fca7ab68cbe29677b6688e8d128f">RefittedTracksProcessor::_RefitTrkHistos_z0cut</a></div><div class="ttdeci">TrackHistos * _RefitTrkHistos_z0cut</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00115">RefittedTracksProcessor.h:115</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_aa870fb1e653f4471a76fa76d13aedc8a"><div class="ttname"><a href="classRefittedTracksProcessor.html#aa870fb1e653f4471a76fa76d13aedc8a">RefittedTracksProcessor::~RefittedTracksProcessor</a></div><div class="ttdeci">~RefittedTracksProcessor()</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8cxx_source.html#l00015">RefittedTracksProcessor.cxx:15</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_ae517ed325f2d7560ddf437b556c90340"><div class="ttname"><a href="classRefittedTracksProcessor.html#ae517ed325f2d7560ddf437b556c90340">RefittedTracksProcessor::RefittedTracksProcessor</a></div><div class="ttdeci">RefittedTracksProcessor(const std::string &amp;name, Process &amp;process)</div><div class="ttdoc">Class constructor.</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8cxx_source.html#l00006">RefittedTracksProcessor.cxx:6</a></div></div>
<div class="ttc" id="aclassRefittedTracksProcessor_html_afe2e5f6b0fa97ae961cb6025ef727d5c"><div class="ttname"><a href="classRefittedTracksProcessor.html#afe2e5f6b0fa97ae961cb6025ef727d5c">RefittedTracksProcessor::_RefitTrkHistos_chi2cut</a></div><div class="ttdeci">TrackHistos * _RefitTrkHistos_chi2cut</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="RefittedTracksProcessor_8h_source.html#l00114">RefittedTracksProcessor.h:114</a></div></div>
<div class="ttc" id="aclassTrackHistos_html"><div class="ttname"><a href="classTrackHistos.html">TrackHistos</a></div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="TrackHistos_8h_source.html#l00017">TrackHistos.h:17</a></div></div>
<div class="ttc" id="aclassTrackHistos_html_a3b1a7887517840397d3dae8fa25e3cb4"><div class="ttname"><a href="classTrackHistos.html#a3b1a7887517840397d3dae8fa25e3cb4">TrackHistos::FillTrackComparisonHistograms</a></div><div class="ttdeci">void FillTrackComparisonHistograms(Track *track_x, Track *track_y, float weight=1.)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="TrackHistos_8cxx_source.html#l00396">TrackHistos.cxx:396</a></div></div>
<div class="ttc" id="aclassTrackHistos_html_a818fef29e5501ea9c64adcb9791784df"><div class="ttname"><a href="classTrackHistos.html#a818fef29e5501ea9c64adcb9791784df">TrackHistos::Fill1DHistograms</a></div><div class="ttdeci">void Fill1DHistograms(Track *track=nullptr, Vertex *vtx=nullptr, float weight=1.)</div><div class="ttdoc">Fill 1D histograms.</div><div class="ttdef"><b>Definition:</b> <a href="TrackHistos_8cxx_source.html#l00297">TrackHistos.cxx:297</a></div></div>
<div class="ttc" id="aclassTrackHistos_html_a9b93e77fcde402a366c1b69d5a234f14"><div class="ttname"><a href="classTrackHistos.html#a9b93e77fcde402a366c1b69d5a234f14">TrackHistos::doTrackComparisonPlots</a></div><div class="ttdeci">void doTrackComparisonPlots(bool doplots)</div><div class="ttdoc">Compare tracks.</div><div class="ttdef"><b>Definition:</b> <a href="TrackHistos_8h_source.html#l00146">TrackHistos.h:146</a></div></div>
<div class="ttc" id="aclassTrackHistos_html_aa0c8ed67148888b30aeec6405b8b16bd"><div class="ttname"><a href="classTrackHistos.html#aa0c8ed67148888b30aeec6405b8b16bd">TrackHistos::Define2DHistos</a></div><div class="ttdeci">virtual void Define2DHistos()</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="TrackHistos_8cxx_source.html#l00062">TrackHistos.cxx:62</a></div></div>
<div class="ttc" id="aclassTrack_html"><div class="ttname"><a href="classTrack.html">Track</a></div><div class="ttdef"><b>Definition:</b> <a href="Track_8h_source.html#l00032">Track.h:32</a></div></div>
<div class="ttc" id="aclassTrack_html_a4f0ac38a52ef74d7167b02e514d2232d"><div class="ttname"><a href="classTrack.html#a4f0ac38a52ef74d7167b02e514d2232d">Track::getChi2Ndf</a></div><div class="ttdeci">double getChi2Ndf() const</div><div class="ttdef"><b>Definition:</b> <a href="Track_8h_source.html#l00121">Track.h:121</a></div></div>
<div class="ttc" id="aclassTrack_html_aa0f1693bfca15b6510027f6041be6bcd"><div class="ttname"><a href="classTrack.html#aa0f1693bfca15b6510027f6041be6bcd">Track::setTrackTime</a></div><div class="ttdeci">void setTrackTime(const double track_time)</div><div class="ttdef"><b>Definition:</b> <a href="Track_8h_source.html#l00148">Track.h:148</a></div></div>
<div class="ttc" id="aclassTrack_html_ac657325cfc2596e354e5262a9c264526"><div class="ttname"><a href="classTrack.html#ac657325cfc2596e354e5262a9c264526">Track::getZ0</a></div><div class="ttdeci">double getZ0() const</div><div class="ttdef"><b>Definition:</b> <a href="Track_8h_source.html#l00092">Track.h:92</a></div></div>
<div class="ttc" id="aclassTrackerHit_html"><div class="ttname"><a href="classTrackerHit.html">TrackerHit</a></div><div class="ttdef"><b>Definition:</b> <a href="TrackerHit_8h_source.html#l00022">TrackerHit.h:22</a></div></div>
<div class="ttc" id="aclassTrackerHit_html_a17a9ca6d361f5e7cdc116c35d699e61f"><div class="ttname"><a href="classTrackerHit.html#a17a9ca6d361f5e7cdc116c35d699e61f">TrackerHit::getLayer</a></div><div class="ttdeci">int getLayer() const</div><div class="ttdef"><b>Definition:</b> <a href="TrackerHit_8h_source.html#l00109">TrackerHit.h:109</a></div></div>
<div class="ttc" id="aclassTrackerHit_html_a9c9659a6c6ba66b4107ba59c95a24241"><div class="ttname"><a href="classTrackerHit.html#a9c9659a6c6ba66b4107ba59c95a24241">TrackerHit::getID</a></div><div class="ttdeci">int getID() const</div><div class="ttdef"><b>Definition:</b> <a href="TrackerHit_8h_source.html#l00124">TrackerHit.h:124</a></div></div>
<div class="ttc" id="aclassVertex_html"><div class="ttname"><a href="classVertex.html">Vertex</a></div><div class="ttdef"><b>Definition:</b> <a href="Vertex_8h_source.html#l00021">Vertex.h:21</a></div></div>
<div class="ttc" id="anamespaceCollections_html_a2beb95bd7784a211d3d9ebaf7f894a1f"><div class="ttname"><a href="namespaceCollections.html#a2beb95bd7784a211d3d9ebaf7f894a1f">Collections::UC_V0CANDIDATES</a></div><div class="ttdeci">constexpr const char * UC_V0CANDIDATES</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00097">Collections.h:97</a></div></div>
<div class="ttc" id="anamespaceCollections_html_a3fe28416324ba7aea8e8eea751994f09"><div class="ttname"><a href="namespaceCollections.html#a3fe28416324ba7aea8e8eea751994f09">Collections::GBL_TRACKS</a></div><div class="ttdeci">constexpr const char * GBL_TRACKS</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00014">Collections.h:14</a></div></div>
<div class="ttc" id="anamespaceCollections_html_a4223ced1aa16409b7f9f1630335c74b8"><div class="ttname"><a href="namespaceCollections.html#a4223ced1aa16409b7f9f1630335c74b8">Collections::RAW_SVT_HIT_FITS</a></div><div class="ttdeci">constexpr const char * RAW_SVT_HIT_FITS</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00023">Collections.h:23</a></div></div>
<div class="ttc" id="anamespaceCollections_html_a6f34f4fdcac7049c52193ceb79629d7b"><div class="ttname"><a href="namespaceCollections.html#a6f34f4fdcac7049c52193ceb79629d7b">Collections::UC_V0VERTICES</a></div><div class="ttdeci">constexpr const char * UC_V0VERTICES</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00109">Collections.h:109</a></div></div>
<div class="ttc" id="anamespaceCollections_html_aab08f4630a9364f2df4a5343c45adea4"><div class="ttname"><a href="namespaceCollections.html#aab08f4630a9364f2df4a5343c45adea4">Collections::TRACK_DATA_REL</a></div><div class="ttdeci">constexpr const char * TRACK_DATA_REL</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00044">Collections.h:44</a></div></div>
<div class="ttc" id="anamespaceCollections_html_aaf43e77b4035ce5cc42833e469a733ab"><div class="ttname"><a href="namespaceCollections.html#aaf43e77b4035ce5cc42833e469a733ab">Collections::KINK_DATA_REL</a></div><div class="ttdeci">constexpr const char * KINK_DATA_REL</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00038">Collections.h:38</a></div></div>
<div class="ttc" id="anamespaceCollections_html_ae6d1aff4543b52dde51846df0383ba5a"><div class="ttname"><a href="namespaceCollections.html#ae6d1aff4543b52dde51846df0383ba5a">Collections::TRACKER_HITS</a></div><div class="ttdeci">constexpr const char * TRACKER_HITS</div><div class="ttdef"><b>Definition:</b> <a href="Collections_8h_source.html#l00029">Collections.h:29</a></div></div>
<div class="ttc" id="anamespaceconfig_1_1anaKalSimpTuple__cfg_html_ad827090038061f4a04a789ab61df8c1d"><div class="ttname"><a href="namespaceconfig_1_1anaKalSimpTuple__cfg.html#ad827090038061f4a04a789ab61df8c1d">config.anaKalSimpTuple_cfg.parameters</a></div><div class="ttdeci">parameters</div><div class="ttdef"><b>Definition:</b> <a href="anaKalSimpTuple__cfg_8py_source.html#l00088">anaKalSimpTuple_cfg.py:88</a></div></div>
<div class="ttc" id="anamespaceconfig_1_1kalSimpTuple__cfg_html_a0ba66fed21d976c0b188b1e975cb94c0"><div class="ttname"><a href="namespaceconfig_1_1kalSimpTuple__cfg.html#a0ba66fed21d976c0b188b1e975cb94c0">config.kalSimpTuple_cfg.vtx</a></div><div class="ttdeci">vtx</div><div class="ttdef"><b>Definition:</b> <a href="kalSimpTuple__cfg_8py_source.html#l00044">kalSimpTuple_cfg.py:44</a></div></div>
<div class="ttc" id="anamespaceconfig_1_1kalSimpTuple__cfg_html_adb5e2391917cad02d6ca0c5ab0a46149"><div class="ttname"><a href="namespaceconfig_1_1kalSimpTuple__cfg.html#adb5e2391917cad02d6ca0c5ab0a46149">config.kalSimpTuple_cfg.track</a></div><div class="ttdeci">track</div><div class="ttdef"><b>Definition:</b> <a href="kalSimpTuple__cfg_8py_source.html#l00037">kalSimpTuple_cfg.py:37</a></div></div>
<div class="ttc" id="anamespaceconfig_1_1trkNtuple__cfg_html_a0fa099d5bc4bb08195c1d4b0cd2d3f00"><div class="ttname"><a href="namespaceconfig_1_1trkNtuple__cfg.html#a0fa099d5bc4bb08195c1d4b0cd2d3f00">config.trkNtuple_cfg.tracks</a></div><div class="ttdeci">tracks</div><div class="ttdef"><b>Definition:</b> <a href="trkNtuple__cfg_8py_source.html#l00028">trkNtuple_cfg.py:28</a></div></div>
<div class="ttc" id="anamespaceutils_html_a38245351b04f5e711d627819b932fbd4"><div class="ttname"><a href="namespaceutils.html#a38245351b04f5e711d627819b932fbd4">utils::buildVertex</a></div><div class="ttdeci">Vertex * buildVertex(EVENT::Vertex *lc_vertex)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00031">utilities.cxx:31</a></div></div>
<div class="ttc" id="anamespaceutils_html_a3fa61a8f1fe762d57473f3193181a256"><div class="ttname"><a href="namespaceutils.html#a3fa61a8f1fe762d57473f3193181a256">utils::hasCollection</a></div><div class="ttdeci">bool hasCollection(EVENT::LCEvent *lc_event, const std::string &amp;collection)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00018">utilities.cxx:18</a></div></div>
<div class="ttc" id="anamespaceutils_html_a434b38abbf31e8df9d32eda0de82e2f9"><div class="ttname"><a href="namespaceutils.html#a434b38abbf31e8df9d32eda0de82e2f9">utils::addRawInfoTo3dHit</a></div><div class="ttdeci">bool addRawInfoTo3dHit(TrackerHit *tracker_hit, IMPL::TrackerHitImpl *lc_tracker_hit, EVENT::LCCollection *raw_svt_fits, std::vector&lt; RawSvtHit * &gt; *rawHits=nullptr, int type=0)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00380">utilities.cxx:380</a></div></div>
<div class="ttc" id="anamespaceutils_html_a5e1646b6a827eb4b57b130766d574583"><div class="ttname"><a href="namespaceutils.html#a5e1646b6a827eb4b57b130766d574583">utils::isUsedByTrack</a></div><div class="ttdeci">bool isUsedByTrack(IMPL::TrackerHitImpl *lc_tracker_hit, EVENT::Track *lc_track)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00435">utilities.cxx:435</a></div></div>
<div class="ttc" id="anamespaceutils_html_a6bd5c589b49d0a2b2404965d82f7fe51"><div class="ttname"><a href="namespaceutils.html#a6bd5c589b49d0a2b2404965d82f7fe51">utils::buildTrackerHit</a></div><div class="ttdeci">TrackerHit * buildTrackerHit(IMPL::TrackerHitImpl *lc_trackerHit, bool rotate=true, int type=0)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00346">utilities.cxx:346</a></div></div>
<div class="ttc" id="anamespaceutils_html_a721ed160b22a3a70f98dba79789df5c9"><div class="ttname"><a href="namespaceutils.html#a721ed160b22a3a70f98dba79789df5c9">utils::buildTrack</a></div><div class="ttdeci">Track * buildTrack(EVENT::Track *lc_track, EVENT::LCCollection *gbl_kink_data, EVENT::LCCollection *track_data)</div><div class="ttdoc">description</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cxx_source.html#l00157">utilities.cxx:157</a></div></div>
<div class="ttc" id="autilities_8h_html"><div class="ttname"><a href="utilities_8h.html">utilities.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
